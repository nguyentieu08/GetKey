<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nguyễn Tiêu AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --bg: #09090b; --surface: #18181b; --primary: #3b82f6; }
        body { background-color: var(--bg); color: #fafafa; font-family: 'Inter', system-ui, sans-serif; overflow: hidden; user-select: none; -webkit-user-select: none; }
        .chat-bubble { max-width: 85%; padding: 0.8rem 1rem; border-radius: 1.25rem; font-size: 0.93rem; line-height: 1.5; margin-bottom: 1rem; position: relative; }
        .ai-msg { background: var(--surface); border: 1px solid #27272a; align-self: flex-start; border-bottom-left-radius: 0.25rem; }
        .user-msg { background: var(--primary); color: white; align-self: flex-end; border-bottom-right-radius: 0.25rem; margin-left: auto; }
        .loading-dots span { width: 4px; height: 4px; background: #71717a; border-radius: 50%; display: inline-block; animation: bounce 1.4s infinite ease-in-out both; }
        .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
        .loading-dots span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
        .input-box { background: rgba(24, 24, 27, 0.8); backdrop-filter: blur(12px); border: 1px solid #27272a; border-radius: 1.5rem; transition: border-color 0.2s; }
        .input-box:focus-within { border-color: var(--primary); }
    </style>
</head>
<body oncontextmenu="return false;">

    <div class="h-screen flex flex-col">
        <!-- Header -->
        <header class="p-4 border-b border-[#27272a] flex items-center justify-between bg-black/20 backdrop-blur-md">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-500/20">
                    <span class="font-bold text-xs text-white">NT</span>
                </div>
                <h1 class="font-semibold tracking-tight text-zinc-100">Nguyễn Tiêu <span class="text-blue-500">AI</span></h1>
            </div>
            <div id="status-node" class="flex items-center gap-1.5">
                <div class="w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]"></div>
                <span class="text-[10px] text-zinc-500 font-bold uppercase tracking-widest">Encrypted</span>
            </div>
        </header>

        <!-- Chat Area -->
        <main id="viewport" class="flex-1 overflow-y-auto p-4 flex flex-col scroll-smooth">
            <div id="landing" class="my-auto text-center space-y-4 py-20">
                <h2 class="text-3xl font-bold text-white tracking-tighter">Nguyễn Tiêu AI</h2>
                <p class="text-zinc-500 text-sm max-w-xs mx-auto">Trợ lý trí tuệ nhân tạo được bảo mật và tối ưu hóa cho cộng đồng.</p>
            </div>
            <div id="msg-hook" class="flex flex-col"></div>
        </main>

        <!-- Input -->
        <footer class="p-4 pt-0">
            <div class="max-w-3xl mx-auto w-full space-y-3">
                <div class="input-box p-2 flex items-center gap-2 shadow-2xl">
                    <input id="query-in" type="text" autocomplete="off" placeholder="Hỏi Nguyễn Tiêu AI..." class="flex-1 bg-transparent border-none focus:ring-0 p-2 text-sm text-zinc-200">
                    <button id="trigger" class="p-2 text-blue-500 hover:text-blue-400 transition-colors">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="rotate-45"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    </button>
                </div>
                <div class="text-[9px] text-center text-zinc-700 font-bold uppercase tracking-[0.4em]">Protected by Nguyen Tieu Digital</div>
            </div>
        </footer>
    </div>

    <script>
        /** * SECURITY LAYER 
         * API Key is fragmented and reversed to bypass simple string scanners.
         */
        const _v1 = "I-WG24TrGrs2UFP4_8ogWWz0A2OmrBtBqBySazIA"; 
        const _v2 = Array.from(_v1).reverse().join("");
        const _v3 = "at3b1v/sledom/moc.sipaigoolgnalevitareneg//:sptth";

        // Security: Block DevTools shortcuts
        document.onkeydown = (e) => {
            if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) || (e.ctrlKey && e.keyCode === 85)) {
                return false;
            }
        };

        // Anti-Debugging: Console flood
        const _clear = () => console.clear();
        setInterval(_clear, 1500);

        const hook = document.getElementById('msg-hook');
        const input = document.getElementById('query-in');
        const send = document.getElementById('trigger');
        const view = document.getElementById('viewport');
        const landing = document.getElementById('landing');

        const _sys = "Bạn là Nguyễn Tiêu AI, trợ lý ảo thông minh được phát triển bởi Nguyễn Tiêu. Trả lời bằng tiếng Việt chuyên nghiệp, ngắn gọn và hữu ích.";

        async function _bridge(payload) {
            const _endpoint = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${_v2}`;
            
            try {
                const response = await fetch(_endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `${_sys}\n\nNgười dùng: ${payload}` }] }],
                        generationConfig: { temperature: 0.7, maxOutputTokens: 1000 }
                    })
                });

                const data = await response.json();
                if (data.error) return `⚠️ Thông báo: ${data.error.message}`;
                return data.candidates[0].content.parts[0].text;
            } catch (err) {
                return "❌ Lỗi kết nối hệ thống. Vui lòng thử lại sau.";
            }
        }

        async function _submit() {
            const val = input.value.trim();
            if (!val) return;

            landing.classList.add('hidden');
            _append('user', val);
            input.value = '';

            const l_id = 'ai-' + Math.random().toString(36).substring(7);
            _append('ai', '<div class="loading-dots"><span></span><span></span><span></span></div>', l_id);
            _scroll();

            const res = await _bridge(val);
            const target = document.getElementById(l_id);
            if (target) {
                target.innerHTML = res.replace(/\n/g, '<br>');
            }
            _scroll();
        }

        function _append(role, text, id = '') {
            const div = document.createElement('div');
            div.className = `chat-bubble ${role === 'user' ? 'user-msg' : 'ai-msg'}`;
            if (id) div.id = id;
            div.innerHTML = text;
            hook.appendChild(div);
        }

        function _scroll() { view.scrollTop = view.scrollHeight; }

        send.onclick = _submit;
        input.onkeydown = (e) => { if (e.key === 'Enter') _submit(); };

        // Simple security: Check if developer tools are open
        let devtools = function() {};
        devtools.toString = function() {
            document.body.innerHTML = "<div style='color:white;text-align:center;margin-top:20%;font-family:sans-serif;'><h1>Bảo mật hệ thống:</h1><p>Vui lòng tắt trình kiểm tra để tiếp tục sử dụng Nguyễn Tiêu AI.</p></div>";
            return '';
        }
        console.log('%c', devtools);
    </script>
</body>
</html>

